need to fix some stuff related to floating point arithmetic
sometimes things get ugly
